/* =============================
   Projects page styles (refined)
   - Formal, technical aesthetic; better case-study UX
   - Slight rounding, efficient spacing
   - Accent: deep teal (change $accent here if desired)
   ============================= */

$ink: #0f172a;
$muted: #64748b;
$bg: #ffffff;
$panel: #FBF9F6;         // warmer off-white to match the brown
$border: #e2e8f0;

/* Light-brown accent */
$accent: #E7D7C1;        // pick one of the light browns above
$accent-dark: #3A2C22;   // matching dark for borders/text/icons
$accent-ink: $accent-dark;

$radius: 6px;
$shadow: 0 1px 2px rgba(2,6,23,.06), 0 8px 24px rgba(2,6,23,.04);


.projects-page {
  display: grid;
  grid-template-columns: 260px minmax(0, 1fr);
  gap: 2rem;
  align-items: start;
  @media (max-width: 980px) { grid-template-columns: 1fr; }
}

/* ===== TOC ===== */
.projects-toc {
  position: sticky; top: 6rem; align-self: start;
  .toc-inner { background: $panel; border: 1px solid $border; border-radius: $radius; box-shadow: $shadow; padding: 1rem; }
  h2 { margin: 0 0 .5rem; font-size: .95rem; letter-spacing: .02em; color: $muted; font-weight: 600; }
  ul { list-style: none; margin: 0; padding: 0; display: grid; gap: .25rem; }
  a { display: flex; align-items: center; justify-content: space-between; padding: .5rem .625rem; border-radius: $radius; color: $ink; text-decoration: none; border: 1px solid transparent; }
  a:hover { background: lighten($panel, 2%); }
  a.active { border-color: $accent; box-shadow: inset 2px 0 0 $accent; }
  .toc-title { font-size: .92rem; line-height: 1.2; }
  .toc-badge { font-size: .7rem; color: $accent; background: mix($accent, #fff, 8%); border: 1px solid mix($accent, #000, 10%); border-radius: 999px; padding: .15rem .5rem; margin-left: .5rem; white-space: nowrap; }
  @media (max-width: 980px) { position: static; .toc-inner { position: sticky; top: 60px; z-index: 2; } }
}

/* ===== MAIN ===== */
.projects-main { display: grid; gap: 2rem; }

.project-section { background: $bg; border: 1px solid $border; border-radius: $radius; box-shadow: $shadow; overflow: hidden; }

/* Hero */
.project-hero { margin: 0; background: $panel; border-bottom: 1px solid $border; img { display: block; width: 100%; height: auto; } figcaption { font-size: .85rem; color: $muted; padding: .5rem 1rem 1rem; } }

/* Header */
.project-header { padding: 1.25rem 1.25rem 0; }
.title-row { display: flex; flex-wrap: wrap; align-items: baseline; gap: .75rem 1rem; }
.project-title { margin: 0; font-size: clamp(1.2rem, 2vw, 1.6rem); line-height: 1.2; }
.project-dates { margin-left: auto; font-size: .9rem; color: $muted; white-space: nowrap; }
.project-oneliner { margin: .5rem 0 0; color: $ink; font-size: 1rem; }
.project-meta { margin: .75rem 0 0; display: flex; flex-wrap: wrap; gap: .4rem; }

/* Chips & stack */
.chip { display: inline-flex; align-items: center; gap: .4rem; padding: .25rem .6rem; font-size: .82rem; border-radius: 999px; border: 1px solid $border; background: #fff; }
.chip--muted { color: $muted; }
.stack-list { margin: .9rem 0 0; padding-bottom: .9rem; border-bottom: 1px solid $border; display: flex; flex-wrap: wrap; gap: .4rem; }
.stack-item { font-size: .8rem; padding: .25rem .5rem; border: 1px solid mix($accent, #000, 12%); background: mix($accent, #fff, 92%); color: $ink; border-radius: $radius; }

/* Impact metrics */
.impact-grid { display: grid; gap: .75rem; grid-template-columns: repeat(12, 1fr); padding: 1rem 1.25rem 0; }
@media (max-width: 1100px) { .impact-grid { grid-template-columns: repeat(6, 1fr); } }
@media (max-width: 640px)  { .impact-grid { grid-template-columns: repeat(2, 1fr); } }
.impact-card { grid-column: span 3; border: 1px solid $border; border-radius: $radius; background: $panel; padding: .75rem .8rem; }
.impact-label { font-size: .75rem; color: $muted; }
.impact-value { font-size: 1.05rem; font-weight: 700; margin-top: .15rem; color: $accent; }
.impact-note  { font-size: .78rem; color: $muted; margin-top: .25rem; }

/* Summary */
.project-summary { padding: 1rem 1.25rem 0; color: $ink; }

/* Highlights */
.highlights { padding: .5rem 1.25rem 0; }
.highlights h3 { font-size: 1rem; margin: .75rem 0 .25rem; }
.highlights ul { margin: 0 0 0 1.1rem; padding: 0; }
.highlights li { margin: .25rem 0; }

/* Case study — improved formatting */
.case-study { padding: .75rem 1.25rem 0; }
.case-study details { border: 1px solid $border; border-radius: $radius; background: #fff; overflow: hidden; }
.case-study summary { cursor: pointer; list-style: none; padding: .8rem 1rem; font-weight: 600; position: relative; user-select: none; }
.case-study summary::after { content: "▸"; position: absolute; right: .8rem; top: 50%; transform: translateY(-50%); font-size: 1rem; color: $accent; }
.case-study details[open] summary::after { content: "▾"; }
.case-study summary:hover { background: mix($accent, #fff, 94%); }
.case-study details > *:not(summary) { padding: .7rem 1rem; }
.case-study h4 { margin: .4rem 0 .3rem; font-size: .95rem; color: $accent; letter-spacing: .01em; }
.case-study p  { margin: 0 0 .6rem; line-height: 1.6; }

/* Links */
.project-links { padding: .75rem 1.25rem 0; display: flex; flex-wrap: wrap; gap: .5rem; }
.btn-link { display: inline-block; padding: .45rem .7rem; font-size: .85rem; color: $accent; border: 1px solid $accent; background: #fff; border-radius: $radius; text-decoration: none; }
.btn-link:hover { background: mix($accent, #fff, 90%); }

/* Gallery */
.project-gallery { padding: .75rem 1.25rem 0; display: grid; gap: .75rem; grid-template-columns: repeat(12, 1fr); }
.project-gallery figure { grid-column: span 4; margin: 0; background: #fff; border: 1px solid $border; border-radius: $radius; overflow: hidden; }
.project-gallery img { width: 100%; display: block; }
.project-gallery figcaption { padding: .5rem .6rem .7rem; font-size: .82rem; color: $muted; }
@media (max-width: 1100px) { .project-gallery figure { grid-column: span 6; } }
@media (max-width: 640px)  { .project-gallery figure { grid-column: span 12; } }

/* Footer meta — simplified to contributions only */
.project-footer { padding: .75rem 1.25rem 1.25rem; margin-top: .5rem; border-top: 1px solid $border; }
.project-footer .ownership { background: $panel; border: 1px solid $border; border-radius: $radius; padding: .75rem .9rem; }
.project-footer .ownership h4 { margin: 0 0 .4rem; font-size: .95rem; color: $ink; }
.project-footer .ownership ul { margin: 0 0 0 1rem; padding: 0; }
.project-footer .ownership li { margin: .25rem 0; }
.project-footer .label { color: $muted; margin-right: .35rem; }

/* Spacing last element */
.project-section > *:last-child { margin-bottom: 1rem; }

/* Light-brown accent tuning */
.projects-toc a.active { border-color: $accent-dark; box-shadow: inset 2px 0 0 $accent-dark; }
.toc-badge { color: $accent-dark; background: mix($accent, #fff, 60%); border: 1px solid mix($accent-dark, #000, 10%); }

.impact-value { color: $accent-dark; }
.case-study summary::after { color: $accent-dark; }

.stack-item {
  border: 1px solid mix($accent-dark, #000, 12%);
  background: mix($accent, #fff, 85%);
}

.btn-link {
  color: $accent-dark;
  border-color: $accent-dark;
}
.btn-link:hover { background: mix($accent, #fff, 88%); }
